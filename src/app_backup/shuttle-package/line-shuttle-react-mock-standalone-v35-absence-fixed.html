<!doctype html>
<html lang="ja">
  <head>
    <!--
      v32 ã‚³ãƒ¡ãƒ³ãƒˆå®Œå…¨ç‰ˆï¼šå…¨ã‚³ãƒ¼ãƒ‰ã¸è©³ç´°ãªæ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆã‚’ä»˜ä¸
      - æ©Ÿèƒ½ãƒ»æ§‹é€ ãƒ»IDãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã¯å®Œå…¨ç¶­æŒï¼ˆéç ´å£Šï¼‰
      - ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿è¿½åŠ ã€‚ç”»é¢å‹•ä½œã«å¤‰åŒ–ã‚’ä¸ãˆã¾ã›ã‚“
      - å¯èª­æ€§é‡è¦–ï¼šã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãƒ»ç©ºè¡Œã‚’å¾®æ•´å½¢ï¼ˆDOMæ§‹é€ ãƒ»å±æ€§é †ã¯ç¶­æŒï¼‰
      - æ–¹é‡ï¼šUIç°¡ç´ åŒ–ï¼ˆnoticeéè¡¨ç¤ºï¼‰ï¼å®‰å…¨æ€§ï¼ˆloc-current-busã¯DOMç¶­æŒã§éè¡¨ç¤ºï¼‰
    -->
    <!-- v31 ã‚³ãƒ¡ãƒ³ãƒˆå¼·åŒ–ç‰ˆï¼šã‚½ãƒ¼ã‚¹æ§‹é€ ãã®ã¾ã¾ï¼æ©Ÿèƒ½å¤‰æ›´ãªã— -->
    <meta charset="utf-8" /> <!-- æ–‡å­—ã‚³ãƒ¼ãƒ‰ï¼šUTF-8ï¼ˆæ—¥æœ¬èªã®å…¨è§’ã‚‚å®‰å…¨ã«ï¼‰ -->
    <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼šã‚¹ãƒãƒ›/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§å€ç‡å›ºå®š -->
    <title><!-- ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼šæ¤œè¨¼ç”¨é€”ã®å˜ä¸€HTMLï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼‰ -->LINEé€è¿ã‚¢ãƒ—ãƒª ãƒ¢ãƒƒã‚¯ï¼ˆå˜ä¸€HTML v21 / ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼‰</title>
    <style>
      /* ===============================================
         ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆUIå¤–è¦³ï¼å½¹å‰²ã®èª¬æ˜ï¼‰
         - æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹/IDã¯ãã®ã¾ã¾
         - å·è»Šãƒãƒƒãƒ—å°å‹åŒ–ã€ONã¯è§’ä¸¸ãƒ”ãƒ«
         - ã€Œåç°¿æ›´æ–°ã€ã€Œä¹—é™è»Šç¢ºèªã€ã¯å†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å»ƒæ­¢â†’å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
         =============================================== */
      /* ===============================================
         ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆUIå¤–è¦³ï¼‰
         - æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ãƒ»IDã‚’ç¶­æŒ
         - å·è»Šãƒãƒƒãƒ—å°å‹åŒ–ã€è§’ä¸¸ONè¡¨ç¤º
         - åç°¿æ›´æ–°ãƒ»ä¹—é™è»Šç¢ºèªã¯ãƒšãƒ¼ã‚¸å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
         =============================================== */
      /* ã‚«ãƒ©ãƒ¼/å½±/ãƒˆãƒ¼ã‚¯ãƒ³ï¼šãƒ†ãƒ¼ãƒæ€§ã®çµ±ä¸€ */
      :root{ --bg:#f6f8fb; --card:#fff; --text:#0f172a; --muted:#64748b; --border:#e5e7eb; --accent:#2563eb; --accent-2:#10b981; --warn:#f97316; --danger:#ef4444; --ok:#22c55e; --shadow:0 10px 28px rgba(15,23,42,.10); }
      /* å¢ƒç•Œå«ã‚€ãƒœãƒƒã‚¯ã‚¹ã‚µã‚¤ã‚ºã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®‰å®šåŒ– */
      *{ box-sizing:border-box; } /* 100%é«˜ï¼šstickyã‚„å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ãŸã‚ */
      html,body{ height:100%; }
      /* ãƒ™ãƒ¼ã‚¹ãƒ•ã‚©ãƒ³ãƒˆ/èƒŒæ™¯ï¼šæ—¥æœ¬èªå¯èª­æ€§ã‚’å„ªå…ˆ */
      body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", "Hiragino Sans", "Yu Gothic UI", sans-serif; background:var(--bg); color:var(--text); }
      body.modal-open{ overflow:hidden; }
      /* ã‚¢ãƒ—ãƒªãƒ©ãƒƒãƒ‘ï¼šç¸¦ç©ã¿ï¼ˆãƒ˜ãƒƒãƒ€ãƒ»æœ¬æ–‡ãƒ»ã‚¿ãƒ–ï¼‰ */
      .app{ min-height:100dvh; display:flex; flex-direction:column; }
      /* ãƒ˜ãƒƒãƒ€ï¼šåŠé€æ˜ï¼‹Blurï¼ä¸‹ç·šã§åŒºåˆ‡ã‚Š */
      header.app-header{ padding:16px 18px; background:#ffffffcc; backdrop-filter: blur(6px); border-bottom:1px solid var(--border); }
      header.app-header h1{ font-size:17px; margin:0; font-weight:700; color:#334155; }
      /* æœ¬æ–‡ï¼šä¸‹éƒ¨ã‚¿ãƒ–ã‚’é™¤ãæ®‹ã‚Šé«˜ã• */
      main{ flex:1; padding:16px; }
      /* å¼·åˆ¶éè¡¨ç¤ºï¼šJSã®åˆ‡æ›¿ã«ä½¿ç”¨ */
      .hidden{ display:none !important; }

      /* ã‚«ãƒ¼ãƒ‰ï¼šç™½èƒŒæ™¯ï¼‹è§’ä¸¸ï¼‹å½±ï¼ˆç”»é¢æ ï¼‰ */
      .card{ background:var(--card); border:1px solid var(--border); border-radius:18px; padding:14px; box-shadow:var(--shadow); }
      /* ã‚¿ã‚¤ãƒˆãƒ«æ¨ªã®è¡Œï¼šç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¤ºã™ */
      .top-status{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; background:#eef2ff; margin-bottom:12px; }
      /* ä¸¸ã‚¢ã‚¤ã‚³ãƒ³ï¼šé€ä¿¡/åœæ­¢ã®è‰²åˆ†ã‘ */
      .icon{ width:40px; height:40px; border-radius:999px; display:grid; place-items:center; color:#fff; box-shadow:var(--shadow); font-size:20px; }
      .icon.play{ background:#22c55e; } .icon.stop{ background:#f97316; }

      /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ç¾¤ï¼šæ—¥ä»˜/è¡Œãå¸°ã‚Š/å·è»Šç­‰ */
      .controls{ display:flex; gap:14px; align-items:center; flex-wrap:wrap; }
      /* ç”»é¢ä¸‹éƒ¨ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¾¤ï¼šç¢ºå®šç­‰ */
      .actions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
      /* å…¥åŠ›UIï¼šã‚¿ãƒƒãƒ—ã—ã‚„ã™ã„è§’ä¸¸ */
      select, input[type=date]{ background:#fff; color:var(--text); border:2px solid var(--border); border-radius:16px; padding:14px 16px; font-size:18px; }
      /* å¤§ãã‚ã‚»ãƒ¬ã‚¯ãƒˆï¼ˆä½ç½®æƒ…å ±ã®å·è»Šãªã©ï¼‰ */
      .giant-select{ font-size:20px; padding:16px 18px; border-width:3px; border-radius:20px; }
      /* ä¸»è¦ãƒœã‚¿ãƒ³ï¼šé’ç³»ã‚°ãƒ©ãƒ‡ */
      button.primary{ background:linear-gradient(90deg, var(--accent), #60a5fa); color:white; border:none; padding:14px 18px; border-radius:18px; cursor:pointer; box-shadow:var(--shadow); font-size:18px; }
      /* å‰¯æ¬¡ãƒœã‚¿ãƒ³ï¼šç™½èƒŒæ™¯ï¼‹æ ç·š */
      button.secondary{ background:#fff; color:#0f172a; border:2px solid var(--border); padding:14px 18px; border-radius:18px; cursor:pointer; font-size:18px; }

      /* åç°¿æ ï¼šè§’ä¸¸ï¼‹æœ€å¤§é«˜ï¼ˆå†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯v30ä»¥é™ã§ç„¡åŠ¹ï¼‰ */
      .list{ border:1px solid var(--border); border-radius:16px; overflow:auto; max-height:60vh; -webkit-overflow-scrolling: touch; }
      /* åç°¿ULï¼šä½™ç™½ã‚’æ’é™¤ */
      .kids{ list-style:none; margin:0; padding:0; }
      /* åç°¿1è¡Œï¼šä¸Šä¸‹ä½™ç™½ï¼‹ç½«ç·š */
      .kids li{ display:flex; flex-direction:column; gap:10px; padding:12px 14px; border-bottom:1px solid var(--border); }
      .kids li:last-child{ border-bottom:none; }
      /* åç°¿è¡Œãƒ˜ãƒƒãƒ€ï¼šå·¦=åå‰ï¼ˆæŠ˜è¿”ã—å¯ï¼‰ï¼å³=ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      /* è¡Œãƒ˜ãƒƒãƒ€ï¼šå·¦=åå‰ï¼ˆæŠ˜è¿”ã—å¯ï¼‰ï¼å³=ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      .kid-header{ display:grid; grid-template-columns: 1fr auto auto; align-items:center; gap:10px; }
      /* ãƒ•ãƒ«ãƒãƒ¼ãƒ ã¯å¿…ãšè¡¨ç¤ºï¼ˆæŠ˜è¿”ã—å¯ï¼‰ */
      /* ãƒ•ãƒ«ãƒãƒ¼ãƒ ï¼šå¿…ãšè¡¨ç¤ºï¼ˆæŠ˜è¿”ã—å¯ï¼‰ */
      .fullname{ font-weight:800; font-size:17px; white-space:normal; line-height:1.3; }
      /* å°å‹ãƒãƒƒãƒ—ï¼šè»½ã„å±æ€§è¡¨ç¤ºç”¨ */
      .chip{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:2px solid var(--border); border-radius:999px; background:#fff; font-size:12px; color:#334155; }
      /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ”ãƒ«ï¼š1è¡Œç¶­æŒ */
      /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ”ãƒ«ï¼šåŒä¸€è¡Œç¶­æŒï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      .status-pill{ font-size:12px; padding:6px 10px; border-radius:999px; background:#e2e8f0; color:#0f172a; justify-self:end; }
      .status-wait{ background:#e2e8f0; color:#0f172a; }
      .status-ride-on{ background:#dbeafe; color:#1e40af; }
      .status-ride-ok{ background:#dcfce7; color:#166534; }
      .status-drop-on{ background:#fde68a; color:#92400e; }
      .status-drop-ok{ background:#fee2e2; color:#b91c1c; }

      /* ä¸‹éƒ¨ã‚¿ãƒ–ï¼šä½ç½®/ç¢ºèª/åç°¿ï¼ˆ3åˆ†å‰²ï¼‰ */
      .bottom-nav{ position:sticky; bottom:0; background:#ffffffee; border-top:1px solid var(--border); display:grid; grid-template-columns: repeat(4, 1fr); }
      /* ã‚¿ãƒ–ãƒœã‚¿ãƒ³ï¼šç¸¦ç©ã¿ã‚¢ã‚¤ã‚³ãƒ³ï¼‹ãƒ©ãƒ™ãƒ« */
      .bottom-nav button{ appearance:none; background:transparent; color:#334155; border:none; padding:14px 12px; font-size:12px; display:flex; flex-direction:column; align-items:center; gap:6px; }
      /* ã‚¿ãƒ–é¸æŠä¸­ã®è‰²ï¼ˆé’ï¼‰ */
      .bottom-nav .active{ color:#2563eb; }

      .badge{ padding:6px 10px; border-radius:999px; font-size:12px; }
      .badge.sending{ background:#e0f2fe; color:#0369a1; } .badge.stopped{ background:#fee2e2; color:#b91c1c; }

      /* === ã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆè¡Œã/å¸°ã‚Šï¼‹å·è»Šï¼‰ === */
      /* è¡Œã/å¸°ã‚Šãªã©ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼šè§’ä¸¸ãƒ”ãƒ«UI */
      .seg{ display:flex; gap:0; border:3px solid var(--border); border-radius:18px; overflow:hidden; }
      /* ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å„ãƒœã‚¿ãƒ³ */
      .seg-btn{ flex:1; padding:16px 22px; background:#fff; border:none; cursor:pointer; font-size:20px; font-weight:700; letter-spacing:0.02em; }
      .seg-btn:focus{ outline:none; }
      /* ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®é¸æŠä¸­ï¼ˆONï¼‰ */
      .seg-btn.active{ background:#e0f2fe; color:#0369a1; box-shadow: inset 0 0 0 2px #93c5fd; }

      /* === ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ï¼ˆä¹—é™ã®ON/OFFï¼‰ === */
      .toggle-row{ display:flex; gap:10px; }
      .toggle-btn{ flex:1; padding:14px 16px; border:2px solid var(--border); border-radius:16px; background:#fff; color:#334155; font-weight:800; cursor:pointer; text-align:center; }
      .toggle-btn.on{ background:#3b82f6; color:#fff; border-color:#1d4ed8; }
      .toggle-btn.disabled{ opacity:.5; cursor:not-allowed; }

      /* ===== ä½ç½®æƒ…å ±ï¼ˆã‚¹ãƒãƒ›/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œï¼‰ ===== */
      /* ä½ç½®æƒ…å ±ï¼šå·¦=å·¨å¤§ãƒˆã‚°ãƒ«ã€å³=ãƒ‘ãƒãƒ« */
      .loc-layout{ display:grid; gap:16px; grid-template-columns: 1fr; }
      /* å·¨å¤§ãƒˆã‚°ãƒ«ã®ä½ç½®åˆã‚ã›ï¼ˆä¸­å¤®ï¼‰ */
      .giant-wrap{ height:48vh; display:flex; align-items:center; justify-content:center; }
      /* å·¨å¤§ãƒˆã‚°ãƒ«ï¼ˆé€ä¿¡/åœæ­¢ï¼‰ï¼šä¸¸ãƒœã‚¿ãƒ³ */
      .giant-btn{ width:min(52vh, 78vw); height:min(52vh, 78vw); border-radius:50%; display:grid; place-items:center; color:#fff; box-shadow:var(--shadow); cursor:pointer; touch-action:manipulation; }
      .giant-btn.play{ background:#22c55e; } .giant-btn.stop{ background:#f97316; }
      .giant-btn .glyph{ font-size:52px; line-height:1; }
      /* å·¨å¤§ãƒˆã‚°ãƒ«ã®çŠ¶æ…‹ãƒ†ã‚­ã‚¹ãƒˆ */
      .giant-text{ text-align:center; margin-top:18px; font-weight:800; font-size:18px; line-height:1.4; }
      .loc-controls{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
      /* ä½ç½®æƒ…å ±å³ãƒ‘ãƒãƒ«ï¼šæ—¥ä»˜/å·è»Š/ãƒãƒƒãƒ—ä¸€è¦§ */
      .loc-panel{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:12px; }

      /* å·è»Šãƒãƒƒãƒ—ã®ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      /* å·è»Šãƒãƒƒãƒ—ã®ç¸¦ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      .bus-grid{ display:grid; grid-template-columns: 1fr; gap:10px; }
      /* å·è»Šãƒãƒƒãƒ—ï¼ˆå„ç”»é¢å…±é€šï¼‰ï¼šå°å‹ï¼†æ”¹è¡Œç¦æ­¢ */
      /* å·è»Šãƒãƒƒãƒ—ï¼šå°å‹ï¼†æ”¹è¡Œç¦æ­¢ï¼ˆä¾‹ï¼š2å·è»Šï¼ˆAï¼‰ã®ï¼ˆAï¼‰æ”¹è¡Œé˜²æ­¢ï¼‰ */
      .bus-chip{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 14px; border:2px solid var(--border); border-radius:16px; background:#fff; font-size:16px; cursor:pointer; }
      .bus-chip .left{ display:flex; align-items:center; gap:10px; }
      .bus-dot{ width:14px; height:14px; border-radius:999px; } .bus-dot.on{ background:#22c55e; } .bus-dot.off{ background:#ef4444; }
      .bus-state{ font-size:12px; color:#64748b; }

      @media (min-width:900px){
        /* ä½ç½®æƒ…å ±ï¼šå·¦=å·¨å¤§ãƒˆã‚°ãƒ«ã€å³=ãƒ‘ãƒãƒ« */
      .loc-layout{ grid-template-columns: 1fr 1fr; align-items:start; }
        /* å·¨å¤§ãƒˆã‚°ãƒ«ã®ä½ç½®åˆã‚ã›ï¼ˆä¸­å¤®ï¼‰ */
      .giant-wrap{ height:52vh; }
        /* å·è»Šãƒãƒƒãƒ—ã®ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      /* å·è»Šãƒãƒƒãƒ—ã®ç¸¦ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      .bus-grid{ grid-template-columns: 1fr; }
        /* ä½ç½®æƒ…å ±å³ãƒ‘ãƒãƒ«ï¼šæ—¥ä»˜/å·è»Š/ãƒãƒƒãƒ—ä¸€è¦§ */
      .loc-panel{ padding:16px; }
        /* å¤§ãã‚ã‚»ãƒ¬ã‚¯ãƒˆï¼ˆä½ç½®æƒ…å ±ã®å·è»Šãªã©ï¼‰ */
      .giant-select{ font-size:22px; padding:18px 20px; }
      }

      /* ===== åç°¿ï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼‰ ===== */
      /* åç°¿æ›´æ–°ï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæ™‚2åˆ—ï¼‰ */
      .tablet-boards{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
      /* å·¦å³ã®åˆ—ã‚³ãƒ³ãƒ†ãƒŠï¼šç™½èƒŒæ™¯ï¼‹å½± */
      .tablet-column{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:10px; box-shadow:var(--shadow); }
      /* åˆ—ãƒ˜ãƒƒãƒ€ï¼šå·è»Šã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼‹äººæ•°ã‚«ã‚¦ãƒ³ãƒˆ */
      .tablet-column header{ position:sticky; top:0; z-index:1; background:#fff; display:flex; align-items:center; justify-content:space-between; padding:6px 8px 10px; border-bottom:1px solid var(--border); color:#334155; }
      /* åˆ—å†…ã®åç°¿é ˜åŸŸï¼šãƒ‰ãƒ©ãƒƒã‚°/ã‚¹ãƒ¯ã‚¤ãƒ—å¯¾è±¡ï¼ˆv30ä»¥é™ã¯å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«åˆã‚ã›ã‚‹ï¼‰ */
      .tablet-list{ min-height:60vh; max-height:70vh; border:1px dashed var(--border); border-radius:12px; padding:6px; position:relative; overflow:auto; -webkit-overflow-scrolling:touch; }
      .kid-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; background:#f1f5f9; padding:12px; border-radius:12px; margin:8px; touch-action:none; font-size:16px; }
      .kid-row .name{ font-weight:800; }
      .kid-row .hint{ font-size:12px; color:#64748b; }
      .drag-ghost{ position:fixed; pointer-events:none; z-index:9999; transform:translate(-50%, -50%); box-shadow:var(--shadow); }
      .drop-target{ outline:3px dashed #60a5fa; outline-offset:4px; }
      @media (max-width:900px){ /* åç°¿æ›´æ–°ï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæ™‚2åˆ—ï¼‰ */
      .tablet-boards{ grid-template-columns: 1fr; } }

      /* ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆä¸­å¤®å›ºå®šï¼‰ */
      .dialog-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:99999; }
      .dialog{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow); width:min(520px, 92vw); max-height:80vh; overflow:auto; }
      .dialog header{ padding:14px 16px; border-bottom:1px solid var(--border); font-weight:800; font-size:16px; text-align:center; }
      .dialog .body{ padding:16px; font-size:14px; white-space:pre-line; }
      .dialog /* ç”»é¢ä¸‹éƒ¨ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç¾¤ï¼šç¢ºå®šç­‰ */
      .actions{ display:flex; gap:10px; justify-content:center; padding:12px 16px; border-top:1px solid var(--border); }
    
      /* ==== v30 è¿½åŠ èª¿æ•´ï¼ˆè»½é‡ãƒ»éå¹²æ¸‰ï¼‰ ==== */
      #loc-current-bus{ display:none; }
      /* å·è»Šãƒãƒƒãƒ—ï¼ˆå„ç”»é¢å…±é€šï¼‰ï¼šå°å‹ï¼†æ”¹è¡Œç¦æ­¢ */
      /* å·è»Šãƒãƒƒãƒ—ï¼šå°å‹ï¼†æ”¹è¡Œç¦æ­¢ï¼ˆä¾‹ï¼š2å·è»Šï¼ˆAï¼‰ã®ï¼ˆAï¼‰æ”¹è¡Œé˜²æ­¢ï¼‰ */
      .bus-chip{ display:flex; align-items:center; justify-content:space-between; gap:4px; padding:5px 7px; border:2px solid var(--border); border-radius:10px; background:#fff; font-size:12px; cursor:pointer; white-space:nowrap; }
      .bus-chip *{ white-space:nowrap; }
      /* å·è»Šãƒãƒƒãƒ—ã®ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      /* å·è»Šãƒãƒƒãƒ—ã®ç¸¦ä¸¦ã³ï¼ˆ1åˆ—ï¼‰ */
      .bus-grid{ display:grid; grid-template-columns: 1fr; gap:6px; }
      /* è¡Œã/å¸°ã‚Šãªã©ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼šè§’ä¸¸ãƒ”ãƒ«UI */
      .seg{ display:flex; gap:6px; border:none; background:transparent; }
      /* ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å„ãƒœã‚¿ãƒ³ */
      .seg-btn{ flex:1; padding:12px 16px; background:#fff; border:2px solid var(--border); border-radius:999px; cursor:pointer; font-size:16px; font-weight:700; letter-spacing:0.02em; }
      .seg-btn:focus{ outline:none; }
      /* ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®é¸æŠä¸­ï¼ˆONï¼‰ */
      .seg-btn.active{ background:#e0f2fe; color:#0369a1; border-color:#93c5fd; box-shadow: inset 0 0 0 2px #93c5fd; }
      /* åç°¿è¡Œãƒ˜ãƒƒãƒ€ï¼šå·¦=åå‰ï¼ˆæŠ˜è¿”ã—å¯ï¼‰ï¼å³=ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      /* è¡Œãƒ˜ãƒƒãƒ€ï¼šå·¦=åå‰ï¼ˆæŠ˜è¿”ã—å¯ï¼‰ï¼å³=ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      .kid-header{ display:grid; grid-template-columns: 1fr auto; align-items:center; gap:8px; }
      /* ãƒ•ãƒ«ãƒãƒ¼ãƒ ã¯å¿…ãšè¡¨ç¤ºï¼ˆæŠ˜è¿”ã—å¯ï¼‰ */
      /* ãƒ•ãƒ«ãƒãƒ¼ãƒ ï¼šå¿…ãšè¡¨ç¤ºï¼ˆæŠ˜è¿”ã—å¯ï¼‰ */
      .fullname{ font-weight:800; font-size:17px; white-space:normal; line-height:1.3; }
      /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ”ãƒ«ï¼š1è¡Œç¶­æŒ */
      /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ”ãƒ«ï¼šåŒä¸€è¡Œç¶­æŒï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰ */
      .status-pill{ white-space:nowrap; }
      /* ä¹—é™è»Šç¢ºèªã®åç°¿ï¼šå†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç„¡åŠ¹åŒ– */
      #screen-boarding /* åç°¿æ ï¼šè§’ä¸¸ï¼‹æœ€å¤§é«˜ï¼ˆå†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯v30ä»¥é™ã§ç„¡åŠ¹ï¼‰ */
      .list{ max-height:none; overflow:visible; }
      /* åç°¿æ›´æ–°ã®å·¦å³ãƒªã‚¹ãƒˆï¼šå†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç„¡åŠ¹åŒ– */
      #screen-roster /* åˆ—å†…ã®åç°¿é ˜åŸŸï¼šãƒ‰ãƒ©ãƒƒã‚°/ã‚¹ãƒ¯ã‚¤ãƒ—å¯¾è±¡ï¼ˆv30ä»¥é™ã¯å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«åˆã‚ã›ã‚‹ï¼‰ */
      .tablet-list{ max-height:none; overflow:visible; }
      /* ãŠçŸ¥ã‚‰ã›ãƒœã‚¿ãƒ³ã¯UIã‹ã‚‰éè¡¨ç¤ºï¼ˆJSã§DOMã‚‚å‰Šé™¤ï¼‰ */
      #board-notice{ display:none !important; }

    </style>
  </head>
  <body>
    <div class="app">
      <header class="app-header"> <!-- ã‚¢ãƒ—ãƒªå…±é€šãƒ˜ãƒƒãƒ€ï¼šã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºã®ã¿ï¼ˆãƒŠãƒ“ã¯ä¸‹éƒ¨ã‚¿ãƒ–ï¼‰ --><h1>LINEé€è¿ã‚¢ãƒ—ãƒª ãƒ¢ãƒƒã‚¯ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ»å˜ä¸€HTML v21ï¼‰</h1></header>
      <main> <!-- ç”»é¢æœ¬ä½“ï¼šä¸‹éƒ¨ã‚¿ãƒ–ã«é€£å‹•ã—ã¦å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º/éè¡¨ç¤º -->
        <!-- ä½ç½®æƒ…å ±ï¼ˆå·è»Š=A/B/2Aã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ‡æ›¿ï¼‰ -->
        <!-- ä½ç½®æƒ…å ±ç”»é¢ï¼šå·¨å¤§ãƒˆã‚°ãƒ«ï¼‹å·è»Šåˆ‡æ›¿ï¼ˆA/B/2Aï¼‰ -->
        <section id="screen-location" class="card">
          <div class="loc-layout">
            <!-- å·¦ï¼šå·¨å¤§ãƒˆã‚°ãƒ« -->
            <div>
              <div class="giant-wrap"><div class="giant-btn play" id="giant-toggle"><span class="glyph">â–¶</span></div></div>
              <div class="giant-text" id="giant-text">åœæ­¢ä¸­ï¼ˆã‚¿ãƒƒãƒ—ã§é€ä¿¡ï¼‰</div>
            </div>
            <!-- å³ï¼šæ“ä½œãƒ‘ãƒãƒ« -->
            <div class="loc-panel">
              <div class="controls" style="margin-bottom:10px">
                <input type="date" id="loc-date" />
                <span class="badge" id="loc-current-bus">1å·è»Šï¼ˆAï¼‰</span>
              </div>
              <!-- å·è»Šã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆä½ç½®æƒ…å ±ç”¨ï¼šA/B/2Aï¼‰ -->
              <div class="seg" id="loc-bus-seg" style="margin-bottom:10px"></div>
              <div class="bus-grid" id="loc-bus-grid"></div>
              <small style="display:block; color:#64748b; margin-top:8px">å„å·è»Šãƒãƒƒãƒ—ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨é€ä¿¡/åœæ­¢ã‚’åˆ‡ã‚Šæ›¿ãˆã§ãã¾ã™ã€‚</small>
            </div>
          </div>
        </section>

        <!-- ä¹—é™è»Šç¢ºèªï¼ˆã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´ï¼ä¹—é™ãƒœã‚¿ãƒ³ä»•æ§˜ï¼‰ -->
        <!-- ä¹—é™è»Šç¢ºèªç”»é¢ï¼šåç°¿ã®ç¢ºèªãƒ»ç¢ºå®šã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯å³æ¨ªã«è¡¨ç¤º -->
        <section id="screen-boarding" class="card hidden">
          <div class="top-status">
            <span class="icon play"><span class="glyph">ğŸ“‹</span></span>
            <strong>ä¹—é™è»Šç¢ºèª</strong>
            <span class="badge sending" id="board-bus-badge">1å·è»Šï¼ˆAï¼‰</span>
            <span class="chip" id="board-bus-state"><span class="bus-dot off"></span><span>åœæ­¢ä¸­</span></span>
          </div>
          <div class="controls" style="margin-bottom:12px">
            <input type="date" id="board-date" />
            <!-- è¡Œã/å¸°ã‚Š -->
            <div class="seg" aria-label="è¡Œãå¸°ã‚Šåˆ‡æ›¿">
              <button id="board-go" class="seg-btn">è¡Œã</button>
              <button id="board-back" class="seg-btn">å¸°ã‚Š</button>
            </div>
            <!-- å·è»Šï¼ˆA/B/2A/å¾’æ­©ï¼‰ -->
            <div class="seg" id="board-bus-seg" aria-label="å·è»Šåˆ‡æ›¿"></div>
            <button class="secondary" id="board-notice">ãŠçŸ¥ã‚‰ã›</button>
          </div>
          <p class="badge stopped hidden" id="board-past">éå»æ—¥ä»˜ã®ãŸã‚ç·¨é›†ä¸å¯</p>
          <div class="list" role="list"><ul class="kids" id="board-list" <!-- ä¹—é™è»Šç¢ºèªã®åç°¿ãƒªã‚¹ãƒˆï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã§å·®ã—æ›¿ãˆï¼‰ -->></ul></div>
          <div class="actions" id="board-actions" style="margin-top:12px"></div>
        </section>

        <!-- åç°¿æ›´æ–°ï¼ˆå·¦å³2ãƒªã‚¹ãƒˆï¼å·è»Šã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ‡æ›¿ï¼‰ -->

        <!-- æ¬ å¸­ç¢ºèªç”»é¢ï¼šå½“æ—¥/éå»æ—¥ã®æ¬ å¸­ä¸€è¦§ï¼ˆ5åã®ä¾‹ï¼‰ -->
        <section id="screen-absence" class="card hidden">
          <div class="top-status">
            <span class="icon stop"><span class="glyph">ğŸ™‡</span></span>
            <strong>æ¬ å¸­ç¢ºèª</strong>
          </div>
          <div class="controls" style="margin-bottom:12px">
            <input type="date" id="absence-date" />
            <span class="badge stopped">å½“æ—¥ã‚„éå»æ—¥ä»˜ã®æ¬ å¸­çŠ¶æ³ã‚’ç¢ºèª</span>
          </div>
          <div class="list" role="list">
            <ul class="kids" id="absence-list">
              <li>
                <div class="kid-header">
                  <span class="fullname">ã‚ã¾ã­ ã•ã</span>
                  <span class="status-pill status-wait">ç™ºç†±</span>
                </div>
                <small class="muted">å‚™è€ƒï¼šä½“æ¸© 38.5 åº¦</small>
              </li>
              <li>
                <div class="kid-header">
                  <span class="fullname">ã„ã¨ã† ã¯ã‚‹ã‹</span>
                  <span class="status-pill status-wait">ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶</span>
                </div>
                <small class="muted">å‚™è€ƒï¼šé«˜ç†±ã®ãŸã‚å—è¨ºäºˆå®š</small>
              </li>
              <li>
                <div class="kid-header">
                  <span class="fullname">ã†ãˆã® ãã†ãŸ</span>
                  <span class="status-pill status-wait">æ…¶å¼”ä¼‘æš‡</span>
                </div>
                <small class="muted">å‚™è€ƒï¼šç¥–æ¯ã®è‘¬å¼</small>
              </li>
              <li>
                <div class="kid-header">
                  <span class="fullname">ãˆã‚“ã©ã† ã¿ã‚†</span>
                  <span class="status-pill status-wait">ç™ºç†±</span>
                </div>
                <small class="muted">å‚™è€ƒï¼šè§£ç†±å¾Œ 24h è¦³å¯Ÿ</small>
              </li>
              <li>
                <div class="kid-header">
                  <span class="fullname">ãŠãŠãŸ ã‘ã„</span>
                  <span class="status-pill status-wait">ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶</span>
                </div>
                <small class="muted">å‚™è€ƒï¼šåŒ»å¸«ã®ç™»åœ’è¨±å¯å¾…ã¡</small>
              </li>
            </ul>
          </div>
        </section>
    
        <!-- ä¹—è»Šåç°¿æ›´æ–°ç”»é¢ï¼šå·¦å³2ãƒªã‚¹ãƒˆï¼ˆã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œï¼‰ã€‚ã‚¹ãƒãƒ›ã¯å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«çµ±ä¸€ -->
        <section id="screen-roster" class="card hidden">
          <div class="top-status">
            <span class="icon play"><span class="glyph">ğŸ—‚ï¸</span></span>
            <strong>ä¹—è»Šåç°¿æ›´æ–°</strong>
          </div>
          <div class="controls" style="margin-bottom:12px">
            <input type="date" id="roster-date" />
            <div class="seg" aria-label="è¡Œãå¸°ã‚Šåˆ‡æ›¿">
              <button id="roster-go" class="seg-btn">è¡Œã</button>
              <button id="roster-back" class="seg-btn">å¸°ã‚Š</button>
            </div>
            <span class="badge sending" id="roster-editable">å½“æ—¥ï¼šç·¨é›†å¯ï¼ˆãƒ‰ãƒ©ãƒƒã‚°/ã‚¹ãƒ¯ã‚¤ãƒ—ã§ç§»å‹•ï¼‰</span>
          </div>
          <div class="tablet-boards">
            <div class="tablet-column">
              <header>
                <div class="seg" id="roster-left-bus-seg" aria-label="å·¦å·è»Šåˆ‡æ›¿"></div>
                <span class="hint" id="left-count">0äºº</span>
              </header>
              <div class="tablet-list" id="left-list" <!-- åç°¿æ›´æ–°ï¼šå·¦åˆ—ãƒªã‚¹ãƒˆï¼ˆãƒ‰ãƒ©ãƒƒã‚°/ã‚¹ãƒ¯ã‚¤ãƒ—å¯¾è±¡ï¼‰ -->></div>
            </div>
            <div class="tablet-column">
              <header>
                <div class="seg" id="roster-right-bus-seg" aria-label="å³å·è»Šåˆ‡æ›¿"></div>
                <span class="hint" id="right-count">0äºº</span>
              </header>
              <div class="tablet-list" id="right-list" <!-- åç°¿æ›´æ–°ï¼šå³åˆ—ãƒªã‚¹ãƒˆï¼ˆãƒ‰ãƒ©ãƒƒã‚°/ã‚¹ãƒ¯ã‚¤ãƒ—å¯¾è±¡ï¼‰ -->></div>
            </div>
          </div>
        </section>
      </main>

      <nav class="bottom-nav" role="tablist">
        <button id="tab-location" class="active" aria-label="ä½ç½®æƒ…å ±"><span>ğŸ“¡</span><span>ä½ç½®æƒ…å ±</span></button>
        <button id="tab-boarding" aria-label="ä¹—é™è»Šç¢ºèª"><span>âœ…</span><span>ä¹—é™è»Šç¢ºèª</span></button>
        <button id="tab-roster" aria-label="åç°¿æ›´æ–°"><span>ğŸ—‚ï¸</span><span>åç°¿æ›´æ–°</span></button>
      
  <button id="tab-absence" aria-label="æ¬ å¸­ç¢ºèª"><span>ğŸ™‡</span><span>æ¬ å¸­ç¢ºèª</span></button>
</nav>
    </div>

    <!-- Dialogs -->
    <div class="dialog-backdrop hidden" id="dialog-backdrop">
      <div class="dialog">
        <header id="dialog-title">ç¢ºèª</header>
        <div class="body" id="dialog-body"></div>
        <div class="actions">
          <button class="secondary" id="dialog-cancel">ã„ã„ãˆ</button>
          <button class="primary" id="dialog-ok">ã¯ã„</button>
        </div>
      </div>
    </div>

    <script>
    // =====================================================
    // æŒ™å‹•è£œåŠ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ©Ÿèƒ½ã¯æ—¢å­˜ã®ã¾ã¾ï¼è»½é‡ãƒ»éå¹²æ¸‰ï¼‰
    // - åˆæœŸåŒ–æ™‚ã«UIä¸è¦è¦ç´ ã‚’é™¤å»ï¼ˆãŠçŸ¥ã‚‰ã›ã€å¾’æ­©çµ„ï¼‰
    // - æ—¢å­˜ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ã‚„ãƒ‡ãƒ¼ã‚¿åˆ‡æ›¿ã«ã¯è§¦ã‚Œã¾ã›ã‚“
    // =====================================================
      // ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
      const $ = sel => document.querySelector(sel); // ç°¡æ˜“ã‚»ãƒ¬ã‚¯ã‚¿ï¼šæœ€åˆã®ä¸€è‡´è¦ç´ ã‚’è¿”ã™
      const show = el => el.classList.remove('hidden'); // è¦ç´ ã‚’è¡¨ç¤ºï¼ˆhiddenã‚¯ãƒ©ã‚¹é™¤å»ï¼‰
      const hide = el => el.classList.add('hidden'); // è¦ç´ ã‚’éè¡¨ç¤ºï¼ˆhiddenã‚¯ãƒ©ã‚¹è¿½åŠ ï¼‰
      const todayStr = () => new Date().toISOString().slice(0,10); // YYYY-MM-DD å½¢å¼ã®æœ¬æ—¥æ–‡å­—åˆ—
      const BUS_LOCATION = ['1å·è»Šï¼ˆAï¼‰','1å·è»Šï¼ˆBï¼‰','2å·è»Šï¼ˆAï¼‰']; // ä½ç½®æƒ…å ±ç”»é¢ã§æ‰±ã†å·è»Šï¼ˆA/B/2Aï¼‰
      const BUS_FULL     = ['1å·è»Šï¼ˆAï¼‰','1å·è»Šï¼ˆBï¼‰','2å·è»Šï¼ˆAï¼‰','å¾’æ­©çµ„']; // ä¹—é™è»Šç¢ºèª/åç°¿æ›´æ–°ã§æ‰±ã†å·è»Šï¼ˆå¾’æ­©çµ„å«ã‚€ï¼šå¾Œè¿°ã§é™¤å»ï¼‰

      // ===== ç”»é¢åˆ‡æ›¿ =====
      const screens = {
        location: $('#screen-location'),  // ä½ç½®æƒ…å ±
        boarding: $('#screen-boarding'),  // ä¹—é™è»Šç¢ºèª
        roster:   $('#screen-roster')     // åç°¿æ›´æ–°
,

        absence:  $('#screen-absence')   // æ¬ å¸­ç¢ºèª â† è¿½åŠ 
};
      function setTab(name){
        // ç”»é¢åˆ‡æ›¿ï¼šå…¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€æ—¦éè¡¨ç¤ºâ†’å¯¾è±¡ã®ã¿è¡¨ç¤º
        Object.values(screens).forEach(hide);
        show(screens[name]);
        // ã‚¿ãƒ–ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
        document.querySelectorAll('.bottom-nav button').forEach(b=> b.classList.remove('active'));
        $('#tab-'+name).classList.add('active');
      }
      $('#tab-location').onclick = ()=> setTab('location'); $('#tab-boarding').onclick = ()=> setTab('boarding'); $('#tab-roster').onclick = ()=> setTab('roster'); $('#tab-absence').onclick = ()=> setTab('absence');

      // ===== ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆä¸­å¤®ï¼‰ =====
      const dialogBackdrop=$('#dialog-backdrop'); const dialogTitle=$('#dialog-title'); const dialogBody=$('#dialog-body'); const dialogOk=$('#dialog-ok'); const dialogCancel=$('#dialog-cancel');
      function openConfirm(title, message, onOk){ dialogTitle.textContent=title; dialogBody.textContent=message; show(dialogBackdrop); document.body.classList.add('modal-open'); dialogOk.onclick=()=>{ hide(dialogBackdrop); document.body.classList.remove('modal-open'); onOk&&onOk(); }; dialogCancel.onclick=()=>{ hide(dialogBackdrop); document.body.classList.remove('modal-open'); }; }

      // ===== ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ï¼ˆæ—¥ä»˜Ã—æ–¹å‘Ã—å·è»Šï¼‰ =====
      const DIR = { GO:'è¡Œã', BACK:'å¸°ã‚Š' };
      const NAME_LIST = [
        'ã‚ã¹ ã²ã‚', 'ã‚ã¾ã­ ã•ã', 'ã‚ã‚„ã› ã‚ŠãŠ', 'ã„ã—ã  ãªãŠ', 'ã„ã¨ã† ã‹ãª', 'ã„ã¾ã‚€ã‚‰ ãã†', 'ã†ãˆã  ã‚Šã', 'ãˆãŒã‚ ã¿ãª', 'ãŠãŒã‚ ã‚ãŠ', 'ãŠã® ã—ã‚“',
        'ã‹ã•ã„ ã¾ã“', 'ã‹ã¨ã† ã‘ã„', 'ã‹ã­ã  ã¯ã‚‹', 'ã‹ã‚ãã¡ ãªãŠ', 'ããŸã‚€ã‚‰ ã²ã‹ã‚Š', 'ãã‚€ã‚‰ ã‚Šã“', 'ãã©ã† ãŸã„ã¡', 'ãã¾ãŒã„ ã‚†ã„', 'ã“ã„ã‘ ã‚‹ãª', 'ã“ãŒ ã“ã¯ã‚‹',
        'ã•ã„ã¨ã† ãã†ã¾', 'ã•ã‹ã‚‚ã¨ ã²ãªãŸ', 'ã•ã•ã ã‚Šã‚‡ã†', 'ã—ã¿ãš ã¯ãª', 'ã™ãšã ã„ã¤ã', 'ã›ããã¡ ã‚ã‹ã‚Š', 'ãŸã‹ã ã¿ã', 'ãŸã‹ã¯ã— ã‚Œã‚“', 'ãŸã‘ã†ã¡ ã—ãŠã‚Š', 'ãŸãªã‹ ã¾ãª',
        'ã¡ã° ãã†ãŸ', 'ã¤ã˜ ã‚Šã‚“', 'ã¦ã‚‰ã  ãˆã¿', 'ã¨ã¿ãŸ ãªãŠ', 'ãªãŒã„ ã¿ã•ã', 'ãªã‹ãŒã‚ ã‘ã‚“', 'ãªã‹ã‚€ã‚‰ ã“ã“ã‚', 'ã«ã—ã  ã‚ã‚„', 'ã¬ã¾ã–ã‚ ãŸã„ãŒ', 'ã®ãã¡ ã•ãã‚‰',
        'ã¯ã‚„ã— ã¤ã°ã•', 'ã¯ã£ã¨ã‚Š ã‚Šã‚“', 'ã²ãŒã— ã¿ãŠ', 'ã²ãã¡ ã‘ã„', 'ãµã˜ãŸ ã‚ãŠã„', 'ã»ã—ã® ã‹ãªã§', 'ã¾ã¤ã„ ã—ã‚“', 'ã¾ã¤ã‚‚ã¨ ã‚Šã', 'ã¿ã†ã‚‰ ã¯ã‚‹', 'ã¿ãšã® ãˆã‚Š', 'ã‚€ã‚‰ã‹ã¿ ã‹ã®ã‚“'
      ];
      const initialKids = ()=>{
        const kids=[]; let id=1; const pick=()=> NAME_LIST[(id-1)%NAME_LIST.length];
        const assign=(bus,count)=>{ for(let i=0;i<count;i++){ kids.push({id:id++, name:pick(), bus:bus, ride:false, drop:false}); } };
        assign('1å·è»Šï¼ˆAï¼‰',15); assign('1å·è»Šï¼ˆBï¼‰',16); assign('2å·è»Šï¼ˆAï¼‰',0); assign('å¾’æ­©çµ„',20);
        return kids;
      };
      const store = {
        state: { currentDate: todayStr(), direction: DIR.GO, currentBusLocation:'1å·è»Šï¼ˆAï¼‰', currentBusBoarding:'1å·è»Šï¼ˆAï¼‰', currentBusRosterLeft:'1å·è»Šï¼ˆAï¼‰', currentBusRosterRight:'å¾’æ­©çµ„' },
        db: {},
        ensureDay(date){ if(this.db[date]) return; const dirData=()=>({ kids: initialKids(), perBus:{ '1å·è»Šï¼ˆAï¼‰':{rideLocked:false,dropLocked:false}, '1å·è»Šï¼ˆBï¼‰':{rideLocked:false,dropLocked:false}, '2å·è»Šï¼ˆAï¼‰':{rideLocked:false,dropLocked:false}, 'å¾’æ­©çµ„':{rideLocked:false,dropLocked:false} } }); this.db[date]={ location:{ '1å·è»Šï¼ˆAï¼‰':false,'1å·è»Šï¼ˆBï¼‰':false,'2å·è»Šï¼ˆAï¼‰':false }, directions:{ 'è¡Œã':dirData(), 'å¸°ã‚Š':dirData() } }; },
        setDate(date){ this.ensureDay(date); this.state.currentDate = date; }, setDirection(d){ this.state.direction = d; },
        day(){ this.ensureDay(this.state.currentDate); return this.db[this.state.currentDate]; }, dir(){ return this.day().directions[this.state.direction]; },
        locationSending(bus){ return this.day().location[bus]; }, toggleLocation(bus){ this.day().location[bus] = !this.day().location[bus]; },
        listKids(bus){ return this.dir().kids.filter(k=> k.bus===bus); }, moveKid(id, toBus){ const k=this.dir().kids.find(x=>x.id===id); if(k) k.bus=toBus; },
        setRide(id, val){ const k=this.dir().kids.find(x=>x.id===id); if(k){ k.ride=val; if(!val) k.drop=false; } }, setDrop(id, val){ const k=this.dir().kids.find(x=>x.id===id); if(k){ k.drop=val; } },
        busLock(bus){ return this.dir().perBus[bus]; }, confirmRide(bus){ this.busLock(bus).rideLocked=true; }, confirmDrop(bus){ this.busLock(bus).dropLocked=true; },
        cancelRide(bus){ const lock=this.busLock(bus); lock.rideLocked=false; lock.dropLocked=false; this.dir().kids.filter(k=>k.bus===bus).forEach(k=> k.drop=false); }, cancelDrop(bus){ this.busLock(bus).dropLocked=false; },
        rosterEditable(bus){ const l=this.busLock(bus); return !(l.rideLocked || l.dropLocked); }
      };
      store.ensureDay(store.state.currentDate);

      // ===== å…±é€šï¼šã‚»ã‚°ãƒ¡ãƒ³ãƒˆç”Ÿæˆ =====
      function buildSeg(container, items, current, onSelect){ container.innerHTML=''; items.forEach(txt=>{ const b=document.createElement('button'); b.className='seg-btn'; b.textContent=txt; b.classList.toggle('active', txt===current()); b.onclick=()=>{ onSelect(txt); }; container.appendChild(b); }); }

      // ===== ä½ç½®æƒ…å ± =====
      function renderLocation(){
        const dateInput = $('#loc-date'); const curBadge=$('#loc-current-bus'); const busSeg=$('#loc-bus-seg'); const busGrid=$('#loc-bus-grid'); const giant=$('#giant-toggle'); const giantText=$('#giant-text');
        dateInput.value = store.state.currentDate; dateInput.onchange = ()=>{ store.setDate(dateInput.value); syncDates(); renderAll();
 // æ¬ å¸­ç¢ºèªï¼šæ—¥ä»˜åˆæœŸå€¤ã‚’å½“æ—¥ã«ï¼ˆæœªè¨­å®šæ™‚ã®ã¿ï¼‰
 (function(){const d=document.getElementById('absence-date'); if(d && !d.value){d.value=new Date().toISOString().slice(0,10);} })(); };
        buildSeg(busSeg, BUS_LOCATION, ()=>store.state.currentBusLocation, (sel)=>{ store.state.currentBusLocation=sel; renderLocation(); });
        curBadge.textContent = store.state.currentBusLocation;
        const sending = store.locationSending(store.state.currentBusLocation);
        if(sending){ giant.className='giant-btn stop'; giant.querySelector('.glyph').textContent='â– '; giantText.textContent='é€ä¿¡ä¸­ï¼ˆã‚¿ãƒƒãƒ—ã§åœæ­¢ï¼‰'; } else { giant.className='giant-btn play'; giant.querySelector('.glyph').textContent='â–¶'; giantText.textContent='åœæ­¢ä¸­ï¼ˆã‚¿ãƒƒãƒ—ã§é€ä¿¡ï¼‰'; }
        giant.onclick = ()=>{ const bus = store.state.currentBusLocation; const next = !store.locationSending(bus); const msg = next? `ã€ä½ç½®æƒ…å ±é€ä¿¡é–‹å§‹ã€‘\n${store.state.currentDate} / ${bus}` : `ã€ä½ç½®æƒ…å ±é€ä¿¡åœæ­¢ã€‘\n${store.state.currentDate} / ${bus}`; openConfirm('ä½ç½®æƒ…å ±', msg, ()=>{ store.toggleLocation(bus); renderLocation(); renderBoardBusState(); }); };
        busGrid.innerHTML=''; BUS_LOCATION.forEach(b=>{ const on = store.locationSending(b); const chip=document.createElement('div'); chip.className='bus-chip'; chip.innerHTML=`<div class="left"><span class="bus-dot ${on?'on':'off'}"></span><strong>${b}</strong></div><span class="bus-state">${on?'é€ä¿¡ä¸­':'åœæ­¢ä¸­'}</span>`; chip.onclick=()=>{ const next = !store.locationSending(b); const msg = next? `ã€ä½ç½®æƒ…å ±é€ä¿¡é–‹å§‹ã€‘\n${store.state.currentDate} / ${b}` : `ã€ä½ç½®æƒ…å ±é€ä¿¡åœæ­¢ã€‘\n${store.state.currentDate} / ${b}`; openConfirm('ä½ç½®æƒ…å ±', msg, ()=>{ store.toggleLocation(b); renderLocation(); renderBoardBusState(); }); }; busGrid.appendChild(chip); });
      }

      // ===== ä¹—é™è»Šç¢ºèªï¼ˆON/OFFã‚’æ ãƒœã‚¿ãƒ³ã«ï¼‰ =====
      function renderBoard(){
        const dateInput = $('#board-date'); const goBtn=$('#board-go'); const backBtn=$('#board-back'); const busSeg=$('#board-bus-seg'); const list=$('#board-list'); const badge=$('#board-bus-badge'); const pastMsg=$('#board-past'); const actions=$('#board-actions');
        dateInput.value = store.state.currentDate; dateInput.onchange = ()=>{ store.setDate(dateInput.value); syncDates(); setTab('boarding'); renderBoard(); };
        const setDir = d=>{ store.setDirection(d); goBtn.classList.toggle('active', d==='è¡Œã'); backBtn.classList.toggle('active', d==='å¸°ã‚Š'); setTab('boarding'); renderBoard(); };
        goBtn.onclick = ()=> setDir('è¡Œã'); backBtn.onclick = ()=> setDir('å¸°ã‚Š'); goBtn.classList.toggle('active', store.state.direction==='è¡Œã'); backBtn.classList.toggle('active', store.state.direction==='å¸°ã‚Š');
        buildSeg(busSeg, BUS_FULL, ()=>store.state.currentBusBoarding, (sel)=>{ store.state.currentBusBoarding=sel; renderBoard(); });
        const bus = store.state.currentBusBoarding; badge.textContent=bus; const isPast = (new Date(store.state.currentDate) < new Date(todayStr())); pastMsg.classList.toggle('hidden', !isPast);
        renderBoardBusState(); list.innerHTML=''; const kids = store.listKids(bus); const lock = store.busLock(bus);

        kids.forEach(k=>{
          const li=document.createElement('li');
          const header=document.createElement('div'); header.className='kid-header';
          const nameSpan=document.createElement('span'); nameSpan.className='fullname'; nameSpan.textContent=k.name;
          const info=document.createElement('div'); info.innerHTML=`<span class="chip">${bus}</span> <span class="chip">${store.state.direction}</span>`;
          const status=document.createElement('span');
          const s = (!k.ride && !k.drop)? 'æœªä¹—è»Š' : (k.ride && !lock.rideLocked)? 'ä¹—è»Šä¸­' : (k.ride && lock.rideLocked && !k.drop)? 'ä¹—è»Šç¢ºå®š' : (k.ride && k.drop && !lock.dropLocked)? 'é™è»Šä¸­' : 'é™è»Šç¢ºå®š';
          const cls = s==='æœªä¹—è»Š'? 'status-wait' : s==='ä¹—è»Šä¸­'? 'status-ride-on' : s==='ä¹—è»Šç¢ºå®š'? 'status-ride-ok' : s==='é™è»Šä¸­'? 'status-drop-on' : 'status-drop-ok';
          status.className='status-pill '+cls; status.textContent=s; header.append(nameSpan, info, status);

          const toggles=document.createElement('div'); toggles.className='toggle-row';
          // ä¹—è»Šãƒˆã‚°ãƒ«ï¼ˆãƒœã‚¿ãƒ³åŒ–ï¼‰
          const rideBtn=document.createElement('div'); rideBtn.className='toggle-btn'+(k.ride?' on':''); rideBtn.textContent='ä¹—è»Š';
          const rideDisabled = isPast || lock.rideLocked;
          if(rideDisabled){ rideBtn.classList.add('disabled'); } else {
            rideBtn.onclick = ()=>{ store.setRide(k.id, !k.ride); renderBoard(); };
          }
          // é™è»Šãƒˆã‚°ãƒ«ï¼ˆãƒœã‚¿ãƒ³åŒ–ï¼‰
          const dropBtn=document.createElement('div'); dropBtn.className='toggle-btn'+(k.drop?' on':''); dropBtn.textContent='é™è»Š';
          const dropEnabled = !isPast && lock.rideLocked && k.ride && !lock.dropLocked;
          if(!dropEnabled){ dropBtn.classList.add('disabled'); } else {
            dropBtn.onclick = ()=>{ store.setDrop(k.id, !k.drop); renderBoard(); };
          }
          toggles.append(rideBtn, dropBtn);
          li.append(header, toggles); list.appendChild(li);
        });

        actions.innerHTML=''; const confirmBtn=document.createElement('button'); confirmBtn.className='primary'; const cancelBtn=document.createElement('button'); cancelBtn.className='secondary'; cancelBtn.classList.add('hidden');
        const showRideConfirm = !isPast && !lock.rideLocked && !lock.dropLocked;
        const showDropConfirm = !isPast && lock.rideLocked && !lock.dropLocked;
        const showCancelRide  = !isPast && lock.rideLocked && !lock.dropLocked;
        const showCancelDrop  = !isPast && lock.dropLocked;
        if(showRideConfirm){ confirmBtn.textContent='ä¹—è»Šç¢ºå®š'; confirmBtn.onclick = ()=>{ const checked = kids.filter(k=>k.ride).length; openConfirm('ä¹—è»Šç¢ºå®š', `æ—¥ä»˜: ${store.state.currentDate}\nå·è»Š: ${bus}\n${store.state.direction}\nä¹—è»Šãƒã‚§ãƒƒã‚¯ ${checked}ä»¶ã‚’ç¢ºå®šã—ã¾ã™ã€‚`, ()=>{ store.confirmRide(bus); renderBoard(); }); }; }
        else if(showDropConfirm){ confirmBtn.textContent='é™è»Šç¢ºå®š'; confirmBtn.onclick = ()=>{ const checked = kids.filter(k=>k.drop).length; openConfirm('é™è»Šç¢ºå®š', `æ—¥ä»˜: ${store.state.currentDate}\nå·è»Š: ${bus}\n${store.state.direction}\né™è»Šãƒã‚§ãƒƒã‚¯ ${checked}ä»¶ã‚’ç¢ºå®šã—ã¾ã™ã€‚`, ()=>{ store.confirmDrop(bus); renderBoard(); }); }; cancelBtn.textContent='ä¹—è»Šç¢ºå®šå–æ¶ˆ'; cancelBtn.classList.remove('hidden'); cancelBtn.onclick = ()=>{ openConfirm('ä¹—è»Šç¢ºå®šå–æ¶ˆ', `æ—¥ä»˜: ${store.state.currentDate}\nå·è»Š: ${bus}\n${store.state.direction}\nä¹—è»Šç¢ºå®šã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã€‚`, ()=>{ store.cancelRide(bus); renderBoard(); }); }; }
        else if(showCancelDrop){ confirmBtn.classList.add('hidden'); cancelBtn.textContent='é™è»Šç¢ºå®šå–æ¶ˆ'; cancelBtn.classList.remove('hidden'); cancelBtn.onclick = ()=>{ openConfirm('é™è»Šç¢ºå®šå–æ¶ˆ', `æ—¥ä»˜: ${store.state.currentDate}\nå·è»Š: ${bus}\n${store.state.direction}\né™è»Šç¢ºå®šã‚’å–ã‚Šæ¶ˆã—ã¾ã™ã€‚`, ()=>{ store.cancelDrop(bus); renderBoard(); }); }; }
        else { confirmBtn.classList.add('hidden'); cancelBtn.classList.add('hidden'); }
        actions.append(confirmBtn, cancelBtn);
      }

      function renderBoardBusState(){ const dot = document.querySelector('#board-bus-state .bus-dot'); const txt = $('#board-bus-state span:last-child'); const bus = store.state.currentBusBoarding; const sending = BUS_LOCATION.includes(bus)? store.locationSending(bus) : false; dot.className='bus-dot '+(sending?'on':'off'); txt.textContent = sending? 'é€ä¿¡ä¸­':'åœæ­¢ä¸­'; }

      // ===== åç°¿æ›´æ–°ï¼ˆå·¦å³ï¼šå·è»Šã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼‰ =====
      function renderRoster(){
        const dateInput = $('#roster-date'); const goBtn=$('#roster-go'); const backBtn=$('#roster-back'); const leftSeg=$('#roster-left-bus-seg'); const rightSeg=$('#roster-right-bus-seg'); const leftList=$('#left-list'); const rightList=$('#right-list'); const leftCount=$('#left-count'); const rightCount=$('#right-count'); const editable=$('#roster-editable');
        dateInput.value = store.state.currentDate; dateInput.onchange = ()=>{ store.setDate(dateInput.value); syncDates(); setTab('roster'); renderRoster(); };
        const setDir = d=>{ store.setDirection(d); goBtn.classList.toggle('active', d==='è¡Œã'); backBtn.classList.toggle('active', d==='å¸°ã‚Š'); setTab('roster'); renderRoster(); };
        goBtn.onclick = ()=> setDir('è¡Œã'); backBtn.onclick = ()=> setDir('å¸°ã‚Š'); goBtn.classList.toggle('active', store.state.direction==='è¡Œã'); backBtn.classList.toggle('active', store.state.direction==='å¸°ã‚Š');
        const isPast = (new Date(store.state.currentDate) < new Date(todayStr())); editable.classList.toggle('hidden', isPast);
        buildSeg(leftSeg, BUS_FULL, ()=>store.state.currentBusRosterLeft, (sel)=>{ store.state.currentBusRosterLeft=sel; renderRoster(); renderBoard(); });
        buildSeg(rightSeg, BUS_FULL, ()=>store.state.currentBusRosterRight, (sel)=>{ store.state.currentBusRosterRight=sel; renderRoster(); });
        const build = (bus, mount, countEl, side)=>{ const kids = store.listKids(bus); mount.innerHTML=''; countEl.textContent = `${kids.length}äºº`; const locked = !store.rosterEditable(bus); kids.forEach(k=>{ const row=document.createElement('div'); row.className='kid-row'; row.setAttribute('data-id', String(k.id)); row.innerHTML = `<div class="name"><span class="fullname">${k.name}</span></div><div class="hint">${locked? 'ç·¨é›†ä¸å¯' : (side==='left'? `å³ã¸ãƒ‰ãƒ©ãƒƒã‚°ã§ã€Œ${store.state.currentBusRosterRight}ã€ã¸` : `å·¦ã¸ãƒ‰ãƒ©ãƒƒã‚°ã§ã€Œ${store.state.currentBusRosterLeft}ã€ã¸`)}</div>`; mount.appendChild(row); if(isPast || locked) return; let dragging=false, ghost=null, startX=0, startY=0; const onStart=e=>{ const t=e.touches? e.touches[0]:e; startX=t.clientX; startY=t.clientY; dragging=true; ghost=row.cloneNode(true); ghost.classList.add('drag-ghost'); ghost.style.background='#fff'; ghost.style.padding='12px'; ghost.style.borderRadius='12px'; ghost.style.left=startX+'px'; ghost.style.top=startY+'px'; document.body.appendChild(ghost); row.style.visibility='hidden'; leftList.classList.remove('drop-target'); rightList.classList.remove('drop-target'); }; const onMove=e=>{ if(!dragging) return; const t=e.touches? e.touches[0]:e; const x=t.clientX; const y=t.clientY; ghost.style.left=x+'px'; ghost.style.top=y+'px'; const L=leftList.getBoundingClientRect(); const R=rightList.getBoundingClientRect(); const overLeft = x>=L.left && x<=L.right && y>=L.top && y<=L.bottom; const overRight = x>=R.left && x<=R.right && y>=R.top && y<=R.bottom; leftList.classList.toggle('drop-target', overLeft); rightList.classList.toggle('drop-target', overRight); }; const onEnd=e=>{ if(!dragging) return; dragging=false; const t=e.changedTouches? e.changedTouches[0]:e; const x=t.clientX; const y=t.clientY; const L=leftList.getBoundingClientRect(); const R=rightList.getBoundingClientRect(); const overLeft = x>=L.left && x<=L.right && y>=L.top && y<=L.bottom; const overRight = x>=R.left && x<=R.right && y>=R.top && y<=R.bottom; if(side==='right' && overLeft){ store.moveKid(k.id, store.state.currentBusRosterLeft); } else if(side==='left' && overRight){ store.moveKid(k.id, store.state.currentBusRosterRight); } else { row.style.visibility='visible'; } leftList.classList.remove('drop-target'); rightList.classList.remove('drop-target'); if(ghost){ ghost.remove(); } renderRoster(); renderBoard(); }; row.addEventListener('touchstart', onStart, {passive:true}); row.addEventListener('touchmove', onMove, {passive:false}); row.addEventListener('touchend', onEnd); row.addEventListener('mousedown', onStart); row.addEventListener('mousemove', onMove); row.addEventListener('mouseup', onEnd); }); };
        build(store.state.currentBusRosterLeft, leftList, leftCount, 'left'); build(store.state.currentBusRosterRight, rightList, rightCount, 'right');
      }
      renderRoster._initialized = false;

      function syncDates(){ $('#loc-date').value = store.state.currentDate; $('#board-date').value = store.state.currentDate; $('#roster-date').value = store.state.currentDate; }
      function renderAll(){ renderLocation(); renderBoard(); renderRoster(); }

      // åˆæœŸæç”»
      setTab('location'); syncDates(); renderAll();
 // æ¬ å¸­ç¢ºèªï¼šæ—¥ä»˜åˆæœŸå€¤ã‚’å½“æ—¥ã«ï¼ˆæœªè¨­å®šæ™‚ã®ã¿ï¼‰
 (function(){const d=document.getElementById('absence-date'); if(d && !d.value){d.value=new Date().toISOString().slice(0,10);} })();
    </script>
  
    <script>
    // =====================================================
    // æŒ™å‹•è£œåŠ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ©Ÿèƒ½ã¯æ—¢å­˜ã®ã¾ã¾ï¼è»½é‡ãƒ»éå¹²æ¸‰ï¼‰
    // - åˆæœŸåŒ–æ™‚ã«UIä¸è¦è¦ç´ ã‚’é™¤å»ï¼ˆãŠçŸ¥ã‚‰ã›ã€å¾’æ­©çµ„ï¼‰
    // - æ—¢å­˜ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ã‚„ãƒ‡ãƒ¼ã‚¿åˆ‡æ›¿ã«ã¯è§¦ã‚Œã¾ã›ã‚“
    // =====================================================
    document.addEventListener('DOMContentLoaded', () => {
      // DOMContentLoadedï¼šHTMLæ§‹é€ èª­ã¿è¾¼ã¿ç›´å¾Œã€‚ä¸è¦UIé™¤å»ã®ã¿å®Ÿæ–½
      // (1) ä¹—é™è»Šç¢ºèªï¼šãŠçŸ¥ã‚‰ã›ãƒœã‚¿ãƒ³ã¯UIæ–¹é‡ä¸Šä¸è¦ã®ãŸã‚å‰Šé™¤
      const noticeEl = document.getElementById('board-notice'); // ä¹—é™è»Šç¢ºèªã®ã€ãŠçŸ¥ã‚‰ã›ã€ãƒœã‚¿ãƒ³è¦ç´ 
      if (noticeEl) noticeEl.remove(); // UIç°¡ç´ åŒ–ï¼šå®Ÿè£…ã¯ã‚ã‚‹ãŒé‹ç”¨ä¸Šã¯å‰Šé™¤ï¼ˆç„¡ç†ã«å‹•ã‹ã™ã®ã§ã¯ãªãéè¡¨ç¤ºé‹ç”¨ï¼‰
      // (2) ä¹—é™è»Šç¢ºèªï¼šãƒã‚¹é¸æŠã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
      const busSeg = document.getElementById('board-bus-seg'); // ãƒã‚¹é¸æŠã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆA/B/2A/å¾’æ­©çµ„ï¼‰
      //   å¾’æ­©çµ„ï¼ˆå¿…è¦ãªã—ï¼‰ã‚’ãƒœã‚¿ãƒ³ãƒªã‚¹ãƒˆã‹ã‚‰ç¢ºå®Ÿã«å–ã‚Šé™¤ãé–¢æ•°
      // å¾’æ­©çµ„ã®é™¤å»ï¼šè¡¨ç¤ºè¦ä»¶ã«åˆã‚ã›ã¦éè¡¨ç¤º
      const removeToho = () => {
        if (!busSeg) return; // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœªæ§‹ç¯‰ãªã‚‰ä½•ã‚‚ã—ãªã„ï¼ˆå®‰å…¨ã‚¬ãƒ¼ãƒ‰ï¼‰
        busSeg.querySelectorAll('button').forEach(b => { // å­ãƒœã‚¿ãƒ³ã‚’èµ°æŸ»
          const t = (b.textContent || '').trim(); // ãƒ©ãƒ™ãƒ«æ–‡å­—åˆ—ï¼ˆç©ºç™½é™¤å»ï¼‰
          // æ–‡è¨€ãŒã€å¾’æ­©çµ„ã€ã¾ãŸã¯ã€å¾’æ­©ã€ã‚’å«ã‚€å ´åˆã¯éè¡¨ç¤º
          if (t.includes('å¾’æ­©çµ„') || t.includes('å¾’æ­©')) b.remove(); // ã€å¾’æ­©çµ„ã€ã¯é‹ç”¨ä¸Šã€é¸æŠè‚¢ã‹ã‚‰é™¤å¤–
        });
      };
      // åˆæœŸåŒ–ç›´å¾Œã«ä¸€åº¦ã ã‘å‰Šé™¤
      removeToho(); // åˆæœŸåŒ–ç›´å¾Œã«ä¸€åº¦ã ã‘å®Ÿè¡Œ
      if (busSeg) {
        // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå†…ã®å­è¦ç´ ãŒå¤‰åŒ–ã—ãŸå ´åˆã«ã‚‚å†åº¦å‰Šé™¤ï¼ˆè»½é‡ç›£è¦–ï¼‰
        const mo = new MutationObserver(() => removeToho()); // å­è¦ç´ ã®å¤‰åŒ–ã«åˆã‚ã›ã¦å†åº¦é™¤å»
        mo.observe(busSeg, { childList:true, subtree:true }); // ç›£è¦–ï¼šå­è¿½åŠ /å‰Šé™¤ã‚’å¯¾è±¡ã€‚ä»–é ˜åŸŸã«ã¯éå¹²æ¸‰ // ç›£è¦–å¯¾è±¡ï¼šå­è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤
      }
    });
    </script>

  </body>
</html>